<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>BinVision - Settings</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  </head>
  <body>
    <div class="sidebar">
      <h2>BinVision</h2>
      <br/>
      <a href="/home">Home</a>
      <a href="/"><strong>Settings</strong></a>
      <a href="/dashboard">Dashboard</a>
    </div>

    <div class="content">
      <div class="register">
        <h3>Augmenter la prÃ©cision de l'IA</h3>
        <div class="mb-3 d-flex gap-2">
          <button class="btn btn-success" onclick="document.getElementById('input').click()">SÃ©lectionner un/des images</button>
        </div>

        <form method="POST" id="Form" enctype="multipart/form-data">
          <input
            type="file"
            id="input"
            name="image"
            accept=".png,.jpg,.jpeg"
            multiple
            required
            style="display: none"
          />

          <div id="preview">ðŸš›</div>
          <div class="d-flex gap-2 mb-3" id="classification">
            <button type="button" class="btn btn-danger" onclick="annotation('Pleine')">Pleine</button>
            <button type="button" class="btn btn-secondary" onclick="annotation('Vide')">Vide</button>
            <button type="button" class="btn btn-warning" onclick="annotation('Auto')">Auto</button>
          </div>
        </form>

        <div class="mt-4">
          <p class="mt-2 text-muted">Lâ€™IA est basÃ©e sur n image</p>
          <button class="btn btn-success" onclick="showDetails()">Voir</button>
        </div>
      </div>
      <div class="details">
        <h4 class="mt-5">Images enregistrÃ©es :</h4>
        <div class="table-responsive">
          <table class="table table-bordered table-hover align-middle" style="height: 700px; overflow-y: auto;">
            <thead class="table-light">
              <tr>
                <th>Image</th>
                <th>Name</th>
                <th>Link</th>
                <th>Annotation</th>
                <th>Dimensions</th>
                <th>Size (KB)</th>
                <th>RGB</th>
                <th>Contrast</th>
                <th>Saturation</th>
                <th>Luminance</th>
              </tr>
            </thead>
            <tbody id="tableaudimage">
              {% for img in images %}
              <tr onclick="showImage('{{ url_for('uploaded_file', filename=img.filename) }}')">
                <td>
                  <img src="{{ url_for('uploaded_file', filename=img.filename) }}" width="80" alt="Image"/>
                </td>
                <td>{{ img.filename }}</td>
                <td>{{ img.link }}</td>
                <td>{{ img.annotation }}</td>
                <td>{{ img.width }}x{{ img.height }}</td>
                <td>{{ img.filesize_kb }}</td>
                <td>({{ img.avg_color_r }}, {{ img.avg_color_g }}, {{ img.avg_color_b }})</td>
                <td>{{ img.contrast }}</td>
                <td>{{ img.saturation }}</td>
                <td>{{ img.luminance }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
          <div class="text-center mt-3">
            <button class="btn btn-outline-danger me-2" onclick="prevPage()">PrÃ©cÃ©dent</button>
            <span id="pageInfo">Page 1</span>
            <button class="btn btn-outline-danger ms-2" onclick="nextPage()">Suivant</button>
          </div>
        </div>
        <div class="text-center mt-4">
          <button class="btn btn-secondary" onclick="hideDetails()">Retour</button>
        </div>
      </div>

      <div id="lightbox" class="lightbox">
        <div class="lightbox-content">
          <button onclick="closeLightbox()" class="btn btn-danger close-btn">X</button>
          <img id="lightbox-img" src="" />
        </div>
      </div>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  </body>
</html>
